<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Bus Details</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>

<body class="bg-light p-3">

<div id="app" class="container" v-if="trip">
  <h4>{{bus.name}} ({{bus.no}})</h4>
  <p>{{trip.from}} → {{trip.to}}</p>

  <p v-if="!trip.runToday" class="text-danger fw-bold">
    ❌ Bus Cancelled Today
  </p>

  <ul class="list-group">
    <li class="list-group-item d-flex justify-content-between"
        v-for="s in trip.stops">
      <span>{{s.name}}</span>
      <span>{{s.time}}</span>
    </li>
  </ul>
</div>

<script>
Vue.createApp({
  data(){return{bus:null,trip:null}},
  mounted(){
    let p=new URLSearchParams(location.search);
    let busNo=p.get('busNo');
    let tripId=p.get('trip');

    fetch('buses.json')
      .then(r=>r.json())
      .then(d=>{
        this.bus=d.buses.find(b=>b.no===busNo);
        this.trip=this.bus.trips.find(t=>t.id===tripId);
      });
  }
}).mount('#app');
</script>
</body>
</html>
