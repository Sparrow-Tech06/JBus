<!DOCTYPE html>
<html>
<head>
<title>Results</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="container py-4">
<h4 id="title"></h4>
<div id="list"></div>

<script>
const q=new URLSearchParams(location.search);
const from=q.get("from");
const to=q.get("to");
title.innerText=`Buses from ${from} to ${to}`;

fetch("buses.json")
.then(r=>r.json())
.then(d=>{
  const res=d.buses.filter(b=>b.from==from && b.to==to);
  list.innerHTML=res.map(b=>`
  <div class="card mb-3">
    <img src="${b.image}" class="card-img-top">
    <div class="card-body">
      <h5>${b.name} (${b.no})</h5>
      ${b.isCancelled?'<span class="text-danger">Not running today</span>':""}
      <ul>
        ${b.stops.map(s=>`<li>${s.name} â€“ ${s.time}</li>`).join("")}
      </ul>
    </div>
  </div>
  `).join("") || "<p>No buses found</p>";
});
</script>
</body>
</html>
